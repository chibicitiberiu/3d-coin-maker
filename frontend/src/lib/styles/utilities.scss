// =============================================================================
// UTILITY CLASSES
// =============================================================================

@use './variables' as *;
@use './mixins' as *;

// -----------------------------------------------------------------------------
// LAYOUT UTILITIES
// -----------------------------------------------------------------------------

.u-flex-center {
  @include flex-center;
}

.u-flex-gap {
  @include flex-gap;
}

.u-flex-column {
  @include flex-column;
}

.u-flex-between {
  @include flex-between;
}

// -----------------------------------------------------------------------------
// SPACING UTILITIES (Loop-Generated for DRY Principle)
// -----------------------------------------------------------------------------

// Spacing scale map for utility generation
$spacing-variants: (
  '0': 0,
  'micro': $spacing-micro,
  'tight': $spacing-tight,
  'small': $spacing-small,
  'normal': $spacing-normal,
  'medium': $spacing-medium,
  'large': $spacing-large,
  'xl': $spacing-xl,
  'xxl': $spacing-xxl
);

// Property mapping for spacing utilities
$spacing-properties: (
  'm': 'margin',
  'mt': 'margin-top',
  'mb': 'margin-bottom',
  'ml': 'margin-left',
  'mr': 'margin-right',
  'mx': ('margin-left', 'margin-right'),
  'my': ('margin-top', 'margin-bottom'),
  'p': 'padding',
  'pt': 'padding-top',
  'pb': 'padding-bottom',
  'pl': 'padding-left',
  'pr': 'padding-right',
  'px': ('padding-left', 'padding-right'),
  'py': ('padding-top', 'padding-bottom')
);

// Generate spacing utilities with SCSS loops
@each $prop-key, $prop-value in $spacing-properties {
  @each $size-key, $size-value in $spacing-variants {
    .u-#{$prop-key}-#{$size-key} {
      @if type-of($prop-value) == 'list' {
        // Handle multi-property cases (mx, my, px, py)
        @each $property in $prop-value {
          #{$property}: #{$size-value};
        }
      } @else {
        #{$prop-value}: #{$size-value};
      }
    }
  }
}

// Gap utilities (flexbox/grid)
@each $size-key, $size-value in $spacing-variants {
  .u-gap-#{$size-key} {
    gap: #{$size-value};
  }
}

// -----------------------------------------------------------------------------
// TYPOGRAPHY UTILITIES
// -----------------------------------------------------------------------------

.u-text-micro { font-size: $font-micro; }
.u-text-small { font-size: $font-small; }
.u-text-body { font-size: $font-body; }
.u-text-normal { font-size: $font-normal; }
.u-text-large { font-size: $font-large; }

.u-weight-normal { font-weight: $weight-normal; }
.u-weight-medium { font-weight: $weight-medium; }
.u-weight-semibold { font-weight: $weight-semibold; }

.u-text-center { text-align: center; }
.u-text-left { text-align: left; }
.u-text-right { text-align: right; }

.u-text-truncate {
  @include text-truncate;
}

// -----------------------------------------------------------------------------
// VISIBILITY UTILITIES
// -----------------------------------------------------------------------------

.u-hidden {
  display: none;
}

.u-invisible {
  visibility: hidden;
}

.u-visually-hidden {
  @include visually-hidden;
}

// -----------------------------------------------------------------------------
// INTERACTION UTILITIES
// -----------------------------------------------------------------------------

.u-no-select {
  user-select: none;
}

.u-pointer {
  cursor: pointer;
}

.u-pointer-none {
  pointer-events: none;
}

// -----------------------------------------------------------------------------
// ANIMATION UTILITIES
// -----------------------------------------------------------------------------

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

@keyframes bounce {
  0%, 20%, 53%, 80%, 100% {
    transform: translate3d(0, 0, 0);
  }
  40%, 43% {
    transform: translate3d(0, -0.5rem, 0);
  }
  70% {
    transform: translate3d(0, -0.25rem, 0);
  }
  90% {
    transform: translate3d(0, -0.0625rem, 0);
  }
}

.u-spin {
  animation: spin 1s linear infinite;
}

.u-pulse {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

.u-bounce {
  animation: bounce 1s infinite;
}

// -----------------------------------------------------------------------------
// BORDER UTILITIES
// -----------------------------------------------------------------------------

.u-border-thin {
  border: $border-thin solid var(--pico-muted-border-color);
}

.u-border-normal {
  border: $border-normal solid var(--pico-muted-border-color);
}

.u-border-primary {
  border: $border-normal solid var(--pico-primary);
}

.u-border-error {
  border: $border-normal solid $error-red;
}

.u-rounded-small {
  border-radius: $radius-small;
}

.u-rounded-normal {
  border-radius: $radius-normal;
}

.u-rounded-large {
  border-radius: $radius-large;
}

.u-rounded-full {
  border-radius: $radius-round;
}

// -----------------------------------------------------------------------------
// SHADOW UTILITIES
// -----------------------------------------------------------------------------

.u-shadow-sm {
  @include shadow-sm;
}

.u-shadow-md {
  @include shadow-md;
}

.u-shadow-lg {
  @include shadow-lg;
}

// -----------------------------------------------------------------------------
// COLOR UTILITIES
// -----------------------------------------------------------------------------

.u-text-primary {
  color: var(--pico-primary);
}

.u-text-muted {
  color: var(--pico-muted-color);
}

.u-text-error {
  color: $error-red;
}

.u-bg-primary {
  background-color: var(--pico-primary-background);
}

.u-bg-muted {
  background-color: var(--pico-muted-background-color);
}

.u-bg-error {
  background-color: $error-bg;
}

// -----------------------------------------------------------------------------
// RESPONSIVE UTILITIES
// -----------------------------------------------------------------------------

@include mobile-only {
  .u-mobile-hidden {
    display: none;
  }
}

@include tablet-up {
  .u-tablet-hidden {
    display: none;
  }
}

@include desktop-up {
  .u-desktop-hidden {
    display: none;
  }
}